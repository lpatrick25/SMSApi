<!-- Main content only shown when connected -->
<ng-container *ngIf="networkStatus">
  <ion-header>
    <ion-toolbar color="primary">
      <ion-title>ğŸ“¨ SMS API Dashboard</ion-title>
      <ion-buttons slot="end">
        <ion-button color="light" style="color: white; font-weight: bolder;" (click)="presentSettingsModal()">
          âš™ï¸ Settings
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content class="ion-padding">
    <!-- Show loading spinner when data is loading -->
    <div *ngIf="loading" class="loading-container">
      <img src="assets/loading.gif" alt="Loading..." class="loading-spinner" /><br>
      <p class="typewriter">Fetching messages...</p>
    </div>

    <!-- Show SMS data once it's loaded -->
    <ion-list lines="none" *ngIf="!loading && pendingSmsRequests.length > 0; else showNoMessages">
      <ion-card *ngFor="let sms of pendingSmsRequests" class="inbox-card">
        <ion-card-content>
          <div class="inbox-header">
            <div class="request-id">ğŸ“Œ Pending Request #{{ sms.id }}</div>
            <ion-badge [color]="sms.status === 'sent' ? 'success' : 'warning'" class="status-badge">
              {{ sms.status | uppercase }}
            </ion-badge>
          </div>

          <div class="inbox-line">
            <span class="label">ğŸ“ Number:</span>
            <span class="value">{{ sms.phone_number }}</span>
          </div>

          <div class="inbox-line message">
            <span class="label">ğŸ’¬ Message:</span>
            <div class="value message-text">
              {{ sms.message }}
            </div>
          </div>
        </ion-card-content>
      </ion-card>
    </ion-list>
    <!-- Template to show when done loading but no messages -->
    <ng-template #showNoMessages>
      <div *ngIf="!loading && pendingSmsRequests.length === 0" class="no-messages-container">
        <ion-icon name="mail-open-outline" class="no-msg-icon"></ion-icon>
        <ion-text color="medium">
          <h3>No Pending Messages</h3>
          <p>You're all caught up!</p>
        </ion-text>
      </div>
    </ng-template>
  </ion-content>

</ng-container>

<!-- Show this when offline -->
<div *ngIf="!networkStatus" class="offline-container">
  <ion-icon name="wifi-outline" size="large" color="danger"></ion-icon>
  <h2>No Internet Connection</h2>
  <p>Please reconnect to continue.</p>

  <!-- Optional: Skeleton shimmer effect -->
  <ion-skeleton-text animated style="width: 80%; height: 100px;"></ion-skeleton-text>
  <ion-skeleton-text animated style="width: 90%; height: 80px; margin-top: 10px;"></ion-skeleton-text>
</div>
